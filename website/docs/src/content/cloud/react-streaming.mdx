---
title: Streaming & React integration
description: Build streaming React applications with GenSX
---

# Streaming & React integration

GenSX provides utilities and hooks that make it easy to build interactive, streaming apps on top of your workflows. This guide will walk you through how to stream data from your workflow and how to consume it in your React app.

## Streaming data from workflows

There are multiple ways to stream data from your workflows. You can steam outputs, objects, events, or an arbitrary data.

### Streaming an output

### Streaming objects

GenSX provides a `publishObject` function that allows you to stream an object to the client. It's designed for you to continually publish the latest state of an object as it gets updated. The changes will be patched to efficiently update the state on the client.

```typescript
import * as gensx from "@gensx/core";

interface Message {
  role: "user" | "assistant" | "system";
  content: string;
}

gensx.publishObject<Message[]>("messages", [
  { role: "assistant", content: "Hello, how can I help you today?" },
]);
```

You can also use `createObjectStream` to create a reusable function for publishing a given object.

```typescript
const publishMessages = gensx.createObjectStream<Message[]>("messages");

publishMessages([
  { role: "assistant", content: "Hello, how can I help you today?" },
]);
```

On the client side, you use the `useObject` hook to subscribe to the object and get the latest state.

### Streaming events

GenSX provides a `publishEvent` function that allows you to stream events to the client. It's designed for you to publish events that happen over time.

```typescript
interface ProgressEvent {
  progress: "brainstorming" | "researching" | "writing" | "editing";
}

gensx.publishEvent<ProgressEvent>("progress", {
  progress: "brainstorming",
});
```

There is also a `createEventStream` helper available for creating a reusable function for publishing the events.

### Streaming arbitrary data

GenSX provides a `publishData` function that allows you to stream arbitrary data to the client. It's designed for you to stream data that doesn't fit into the other categories.

```typescript
gensx.publishData("draft-progress", draftProgress);
```

## Consuming streaming data in React

The `@gensx/react` library is the best way to consume streaming data from GenSX workflows.

### Setting up the passthrough API

To avoid exposing your GenSX API key to the client, we recommend setting up a passthrough API that forwards the request to the GenSX API. For brevity, we won't include the code here but you can grab [the code here](https://github.com/gensx-inc/gensx/blob/main/examples/chat-ux/app/api/gensx/%5Bworkflow%5D/route.ts) as a reference.

### Using the `useWorkflow` hook

The `useWorkflow` hook lets you run a workflow and subscribe to its events and output.

```typescript
const { inProgress, error, output, execution, run, stop } = useWorkflow<
  ChatInput, // the input type of the workflow
  ChatOutput // the output type of the workflow
>({
  config: {
    baseUrl: "/api/gensx/chat", // the passthrough API route
  },
});

// Run the workflow
await run({
  inputs: {
    userMessage: "Hello, how are you?",
  },
});
```

`useWorkflow` also supports callbacks for `onStart`, `onComplete`, `onError`, and `onEvent` that you can use to handle the workflow's lifecycle.

```typescript
const { error, output, execution, run } = useWorkflow<ChatInput, ChatOutput>({
  config: {
    baseUrl: "/api/gensx/chat", // the passthrough API route
  },
  onStart: () => {
    console.log("Workflow started");
  },
  onComplete: () => {
    console.log("Workflow completed");
  },
  onError: (error) => {
    console.error(error);
  },
  onEvent: (event) => {
    console.log(event);
  },
});
```

### Using the `useObject` hook

The `useObject` hook lets you subscribe to an object and get the latest state.

```typescript
const messages = useObject<Message[]>(execution, "messages");
```

### Using the `useEvents` hook

The `useEvents` hook lets you subscribe to events and get the latest state.

```typescript
const progressEvents = useEvents<ProgressEvent>(execution, "progress");

progressEvents.forEach((event) => {
  console.log(event.progress);
});
```

## Event types

In addition to the events created by `publishEvent`, `publishObject`, and `publishData`, GenSX also emits the following events:

| Event Type        | Description                        | Key Properties  |
| ----------------- | ---------------------------------- | --------------- |
| `start`           | Emitted when the workflow starts   | `workflowName`  |
| `end`             | Emitted when the workflow ends     | `id`            |
| `component-start` | Emitted when a component starts    | `componentName` |
| `component-end`   | Emitted when a component ends      | `componentName` |
| `output`          | Emitted when an output is returned | `content`       |
| `error`           | Emitted when an error occurs       | `error`         |

### Example event payloads:

```json
// start event
{
  "type": "start",
  "workflowName": "Chat",
  "id": "1752108242902",
  "timestamp": "2025-07-10T00:44:02.902Z"
}

// end event
{
  "type": "end",
  "id": "1752108243493",
  "timestamp": "2025-07-10T00:44:03.493Z"
}

// component-start event
{
  "type": "component-start",
  "componentName": "StreamText",
  "componentId": "StreamText:7e1339d69eee8d3d",
  "id": "1752108242902",
  "timestamp": "2025-07-10T00:44:02.902Z"
}

// component-end event
{
  "type": "component-end",
  "componentName": "StreamText",
  "componentId": "StreamText:7e1339d69eee8d3d",
  "id": "1752108242904",
  "timestamp": "2025-07-10T00:44:02.904Z"
}

// output event
{
    "id": "1752109017087",
    "timestamp": "2025-07-10T00:56:57.087Z",
    "type": "output",
    // content is a string, JSON will be stringified
    "content": "{\"message\":\"Hello, world!\",\"confidence\":0.95}"
}

// error event
{
    "id": "1752109017087",
    "timestamp": "2025-07-10T00:56:57.087Z",
    "type": "error",
    "error": "An error occurred"
}
```

## Consuming streaming data from the API

To consume the streaming messages from the API, you need to set the `Accept` header to `text/event-stream` or `application/x-ndjson`. The `@gensx/react` and `@gensx/client` libraries automatically set the `Accept` header for you.
