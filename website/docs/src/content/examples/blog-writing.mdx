---
title: Blog writer
description: Blog writing agent with Perplexity and GenSX
---

# Blog writer

Breaking down complex tasks into smaller, discrete steps is one of the best ways to improve the quality of LLM outputs. The [blog writer workflow example](https://github.com/gensx-inc/gensx/tree/main/examples/blog-writer) does this by following the same approach a human would take to write a blog post: first conducting research, then generating a first draft, and finally editing that draft.

## Workflow

The Blog Writer workflow consists of the following steps:

1. Research phase:
   - Brainstorm topics using LLM (`BrainstormTopics`)
   - Research each topic in detail (`ResearchTopic`)
2. Write initial draft based on research (`WriteDraft`)
3. Edit and polish the content (`EditDraft`)

## Running the example

```bash
# Navigate to the example directory
cd examples/blog-writer

# Install dependencies
pnpm install

# Set your OpenAI API key
export OPENAI_API_KEY=<your_api_key>

# Run the example
pnpm run start
```

## Key patterns

### Running components in parallel

The `Research` component processes multiple topics in parallel using `Promise.all`. It first gets a list of topics from `BrainstormTopics` and then researches each topic concurrently:

```ts
const Research = gensx.Component(
  "Research",
  async ({ prompt }: ResearchProps): Promise<ResearchOutput> => {
    const brainstorm = await BrainstormTopics({ prompt });

    const research = await Promise.all(
      brainstorm.topics.map((topic) => ResearchTopic({ topic })),
    );
    return [research, brainstorm.topics];
  },
);
```

### Tool usage in components

The `ResearchTopic` component shows how you can automatically process tools using `@gensx/openai` and OpenAI's `runTools` helper.

```ts
const ResearchTopic = gensx.Component(
  "ResearchTopic",
  async ({ topic }: ResearchTopicProps) => {
    const runner = await openai.beta.chat.completions.runTools({
      model: "gpt-4o-mini",
      temperature: 0,
      messages: [
        { role: "system", content: systemPrompt },
        { role: "user", content: topic },
      ],
      tools: [
        {
          type: "function",
          function: {
            name: "research",
            description: "Research a topic",
            parameters: {
              type: "object",
              properties: {
                topic: {
                  type: "string",
                },
              },
            },
            parse: JSON.parse,
            function: (args: { topic: string }) => {
              console.log("üîç Research tool:", args.topic);
              return `You researched the topic ${args.topic} and found the following: ${args.topic}`;
            },
          },
        },
      ],
    });

    return (await runner.finalContent()) ?? "";
  },
);
```

## Additional resources

Check out the other examples in the [GenSX Github Repo](https://github.com/gensx-inc/gensx/tree/main/examples).
